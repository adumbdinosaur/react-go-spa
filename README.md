# Running the Applications

To run both the Go server and the React application concurrently, follow these steps:

1. Ensure you have the required dependencies installed:
   - [Go](https://golang.org/doc/install)
   - [Node.js and yarn](https://nodejs.org/)

2. Make the `run.sh` script executable (if not already):
```bash
chmod +x run.sh
``` 

# Architecture and Design

This project was built with a **design-first approach**, focusing on creating a clear and scalable architecture before diving into implementation. The key aspects of the architecture are as follows:

## Backend (Go Server)
- The backend is built using **Go**, providing a lightweight and efficient API server.
- The API was designed first using an OpenAPI specification, ensuring a well-documented and consistent interface for communication between the frontend and backend.
- The API client code was **autogenerated** using tools like `openapi-generator`, allowing for seamless integration with the frontend. As the project evolved, the OpenAPI specification was updated, and the client code was regenerated to reflect the latest changes.
- The backend handles user authentication, file management, and other core functionalities, exposing endpoints that the React frontend consumes.

## Frontend (React Application)
- The frontend is built using **React** with TypeScript, ensuring type safety and better developer experience.
- The application is structured around reusable components, such as `Sidebar`, `CLI`, `Display`, and `LoginRegister`, which encapsulate specific pieces of functionality.
- The `ApiContext` provides a centralized way to interact with the backend API, making it easy to manage API calls and share data across components.

## Opportunities for Further Component Decomposition
While the current component structure is functional, some JSX components can be broken down further to improve readability, maintainability, and reusability:
- **Sidebar**: The `Sidebar` component could be split into smaller components, such as `FileList` (to display the list of files) and `UserActions` (to handle logout and other user-related actions).
- **CLI**: The `CLI` component could be decomposed into smaller components, such as `CommandInput` (for the input field) and `CommandHistory` (to display the history of commands).
- **LoginRegister**: The `LoginRegister` component could be split into separate `Login` and `Register` components, each handling their respective forms and logic.

By breaking down these components further, the codebase can become more modular and easier to test, debug, and extend.

## Iterative Development
The project followed an iterative development process:
1. The API was designed and implemented first, ensuring a solid foundation for the application.
2. The frontend was built incrementally, starting with core functionality and gradually adding features.
3. As new requirements emerged, the OpenAPI specification was updated, and the autogenerated API client was regenerated to keep the frontend and backend in sync.

This approach allowed for rapid development while maintaining a clean and scalable architecture.

# Future Improvements

As the project evolves, there are several opportunities to enhance its functionality and performance. Below are some potential future improvements:

## Caching
- **Purpose**: Improve performance and reduce server load by caching frequently accessed data.
- **Implementation**:
  - Use a caching layer (e.g., Redis or Memcached) to store user file metadata and other frequently requested data.
  - Implement client-side caching for API responses using libraries like `react-query` or `SWR`.
  - Add cache invalidation mechanisms to ensure data consistency when files are updated or deleted.

## Sharing Functionality
- **Purpose**: Enable users to share files or data with other users, enhancing collaboration.
- **Implementation**:
  - Add a "Share" button in the frontend for each file, allowing users to generate a shareable link or invite other users.
  - Extend the backend API to support file sharing, including endpoints for granting and revoking access to specific files.
  - Implement role-based access control (e.g., read-only or edit permissions) for shared files.
  - Notify users when a file is shared with them via email or in-app notifications.

These improvements would make the application more robust, user-friendly, and scalable, catering to a broader range of use cases.

## API Usage Examples

### Register a New User

**POST** `/api/v1/register`

**Request:**
```json
{
  "username": "johndoe",
  "password": "securepassword123"
}
```

**Response (201 Created):**
```json
{
  "message": "User registered successfully",
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

---

### Login User

**POST** `/api/v1/login`

**Request:**
```json
{
  "username": "johndoe",
  "password": "securepassword123"
}
```

**Response (200 OK):**
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

---

### Upload a File

**POST** `/api/v1/upload`  
**Content-Type:** `multipart/form-data`

**Form Data:**

| Field | Type  | Description              |
|-------|-------|--------------------------|
| file  | File  | A plain text document    |

**Response (200 OK):**
```json
{
  "message": "File uploaded successfully"
}
```

---

### Query the Uploaded File

**POST** `/api/v1/query`  
**Content-Type:** `application/json`

**Request:**
```json
{
  "query": "renewable energy storage",
  "fileName": "document.txt"
}
```

**Response (200 OK):**
```json
{
  "results": [
    "Snippet 1",
    "Snippet 2"
  ]
}
```

---

### Get User's Files

**GET** `/api/v1/user/files`  
**Headers:**
```
Authorization: Bearer <your_token>
```

**Response (200 OK):**
```json
{
  "files": [
    "file1.txt",
    "file2.txt"
  ]
}
```

---

### Logout

**POST** `/api/v1/logout`  
**Headers:**
```
Authorization: Bearer <your_token>
```

**Response (200 OK):**
```json
{
  "message": "User logged out successfully"
}
```

---

### CORS Preflight

All routes support `OPTIONS` requests for CORS preflight.

**OPTIONS** `/api/v1/upload`

**Response (204 No Content):**

**Headers:**
```
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: POST, OPTIONS
Access-Control-Allow-Headers: Content-Type
```
